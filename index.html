<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Qu·∫£n l√Ω t√†i kho·∫£n Li√™n Qu√¢n</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&family=Poppins:wght@300;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --blue1: #e6f7ff;
  --blue2: #f0faff;
  --accent: #007acc;
  --accent2: #66c2ff;
  --muted: #666;
  --success: #00c853;
  --warning: #ff9800;
  --error: #f44336;
  --pink: #ff6b9d;
  --purple: #9d4edd;
  --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

[data-theme="dark"] {
  --blue1: #1a1a2e;
  --blue2: #16213e;
  --accent: #4dabf7;
  --accent2: #339af0;
  --muted: #adb5bd;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, var(--blue1), var(--blue2));
  min-height: 100vh;
  color: #222;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow-x: hidden;
}

/* Floating Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-10px) rotate(2deg); }
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 20px rgba(102, 194, 255, 0.3); }
  50% { box-shadow: 0 0 30px rgba(102, 194, 255, 0.6); }
}

@keyframes slideIn {
  from { 
    opacity: 0;
    transform: translateY(30px) scale(0.9);
  }
  to { 
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
  40% {transform: translateY(-10px);}
  60% {transform: translateY(-5px);}
}

@keyframes sparkle {
  0% { transform: scale(0) rotate(0deg); opacity: 0; }
  50% { transform: scale(1) rotate(180deg); opacity: 1; }
  100% { transform: scale(0) rotate(360deg); opacity: 0; }
}

/* Cute Elements */
.cute-badge {
  background: linear-gradient(45deg, var(--pink), var(--purple));
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  animation: float 3s ease-in-out infinite;
}

.sparkle {
  position: absolute;
  width: 20px;
  height: 20px;
  background: radial-gradient(circle, #fff 20%, transparent 70%);
  border-radius: 50%;
  animation: sparkle 2s linear infinite;
}

.wrap {
  max-width: 1400px;
  margin: 20px auto;
  padding: 16px;
  animation: slideIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.1),
    0 2px 8px rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  transition: left 0.6s;
}

.card:hover::before {
  left: 100%;
}

.card:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 
    0 15px 40px rgba(0, 0, 0, 0.15),
    0 5px 15px rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .card {
  background: rgba(45, 55, 72, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

h1, h2, h3 {
  margin: 0 0 16px;
  color: var(--accent);
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}

h1::after, h2::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 50px;
  height: 3px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  border-radius: 2px;
}

input, select, textarea {
  padding: 12px 16px;
  border: 2px solid #cdeeff;
  border-radius: 12px;
  outline: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background: rgba(255, 255, 255, 0.9);
  font-family: 'Poppins', sans-serif;
}

input:focus, select:focus, textarea:focus {
  border-color: var(--accent2);
  box-shadow: 0 0 0 3px rgba(102, 194, 255, 0.3);
  transform: scale(1.02);
}

[data-theme="dark"] input, 
[data-theme="dark"] select, 
[data-theme="dark"] textarea {
  background: rgba(74, 85, 104, 0.9);
  border-color: #718096;
  color: #e2e8f0;
}

button {
  padding: 12px 20px;
  border-radius: 15px;
  border: 0;
  background: linear-gradient(135deg, var(--accent2), var(--accent));
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: 'Poppins', sans-serif;
  position: relative;
  overflow: hidden;
}

button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

button:hover::before {
  left: 100%;
}

button:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 
    0 10px 25px rgba(102, 194, 255, 0.4),
    0 5px 10px rgba(102, 194, 255, 0.2);
  animation: glow 2s ease-in-out infinite;
}

button:active {
  transform: translateY(-1px) scale(1.02);
}

button.ghost {
  background: rgba(246, 253, 255, 0.8);
  border: 2px solid var(--accent2);
  color: var(--accent);
  backdrop-filter: blur(10px);
}

button.ghost:hover {
  background: var(--accent2);
  color: white;
}

[data-theme="dark"] button.ghost {
  background: rgba(74, 85, 104, 0.8);
  border-color: #718096;
  color: #e2e8f0;
}

/* Table styles for mobile swipe */
.table-container {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin-top: 16px;
  border-radius: 12px;
  position: relative;
}

table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 12px;
  min-width: 800px; /* Ensure table has minimum width for scrolling */
}

th, td {
  padding: 16px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  vertical-align: middle;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

th:hover, td:hover {
  transform: translateX(5px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
}

[data-theme="dark"] th, 
[data-theme="dark"] td {
  background: rgba(74, 85, 104, 0.9);
  color: #e2e8f0;
}

th {
  background: linear-gradient(135deg, var(--blue1), var(--blue2));
  color: var(--accent);
  font-weight: 600;
  position: relative;
}

[data-theme="dark"] th {
  background: linear-gradient(135deg, #2d3748, #4a5568);
}

img.thumb {
  width: 70px;
  height: 70px;
  object-fit: cover;
  border-radius: 12px;
  border: 2px solid #dff4ff;
  transition: all 0.3s ease;
  cursor: pointer;
}

img.thumb:hover {
  transform: scale(1.1) rotate(2deg);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.logo {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  border: 3px solid #cfefff;
  animation: float 4s ease-in-out infinite;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

#loadingOverlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  background: linear-gradient(135deg, rgba(230,247,255,0.98), rgba(240,250,255,0.98));
  z-index: 9999;
  text-align: center;
  transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] #loadingOverlay {
  background: linear-gradient(135deg, rgba(26,26,46,0.98), rgba(22,33,62,0.98));
}

#loadingOverlay.fade-out {
  opacity: 0;
  pointer-events: none;
}

#popup {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(5px);
}

#popupContent {
  background: rgba(255, 255, 255, 0.95);
  padding: 30px;
  border-radius: 20px;
  max-width: 900px;
  max-height: 80%;
  overflow: auto;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] #popupContent {
  background: rgba(74, 85, 104, 0.95);
  color: #e2e8f0;
}

.hero-grid label {
  margin-right: 12px;
  display: inline-block;
  padding: 8px 16px;
  background: rgba(247, 253, 255, 0.8);
  border: 2px solid #e6fbff;
  border-radius: 12px;
  margin: 6px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(10px);
}

.hero-grid label:hover {
  background: rgba(230, 247, 255, 0.9);
  border-color: var(--accent2);
  transform: translateY(-2px) scale(1.05);
}

.hero-grid input:checked + span {
  font-weight: 700;
  color: var(--accent);
  text-shadow: 0 2px 4px rgba(0, 122, 204, 0.2);
}

.skin-grid label {
  display: inline-block;
  margin: 8px;
  border-radius: 10px;
  padding: 8px 12px;
  background: rgba(247, 253, 255, 0.8);
  border: 2px solid #e6fbff;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  backdrop-filter: blur(10px);
}

.skin-grid label:hover {
  transform: translateY(-2px) scale(1.05);
  border-color: var(--accent2);
}

[data-theme="dark"] .skin-grid label {
  background: rgba(45, 55, 72, 0.8);
  border-color: #4a5568;
}

.controls {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
}

.muted {
  color: var(--muted);
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin: 20px 0;
}

.stat-card {
  background: linear-gradient(135deg, var(--blue1), var(--blue2));
  padding: 20px;
  border-radius: 16px;
  text-align: center;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.stat-card:hover {
  transform: translateY(-5px) scale(1.05);
}

.stat-card:nth-child(1) { animation-delay: 0.1s; }
.stat-card:nth-child(2) { animation-delay: 0.2s; }
.stat-card:nth-child(3) { animation-delay: 0.3s; }
.stat-card:nth-child(4) { animation-delay: 0.4s; }

.stat-number {
  font-size: 28px;
  font-weight: 700;
  color: var(--accent);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.stat-label {
  font-size: 14px;
  color: var(--muted);
  margin-top: 8px;
}

.toast {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 16px 24px;
  border-radius: 12px;
  color: white;
  z-index: 10001;
  transform: translateX(400px);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  max-width: 300px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.toast.show {
  transform: translateX(0);
}

.toast.success {
  background: linear-gradient(135deg, var(--success), #00e676);
}

.toast.error {
  background: linear-gradient(135deg, var(--error), #ff5252);
}

.toast.warning {
  background: linear-gradient(135deg, var(--warning), #ffb74d);
}

.toast.info {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
}

.tr-hot {
  border-left: 4px solid #ff4444 !important;
  animation: pulse 2s infinite;
}

.tr-new {
  border-left: 4px solid #44ff44 !important;
}

.tr-sold {
  border-left: 4px solid var(--muted) !important;
}

.theme-switch {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  padding: 10px;
  border-radius: 50%;
  transition: all 0.3s ease;
  animation: bounce 2s infinite;
}

.theme-switch:hover {
  transform: scale(1.2) rotate(15deg);
}

.advanced-filters {
  background: rgba(230, 247, 255, 0.8);
  padding: 16px;
  border-radius: 15px;
  margin: 16px 0;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.filter-group {
  display: flex;
  gap: 16px;
  align-items: center;
  flex-wrap: wrap;
  margin: 12px 0;
}

.quick-actions {
  display: flex;
  gap: 12px;
  margin: 16px 0;
  flex-wrap: wrap;
}

.hero-section {
  margin: 16px 0;
  padding: 16px;
  background: rgba(230, 247, 255, 0.6);
  border-radius: 15px;
  border: 2px solid rgba(102, 194, 255, 0.3);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.hero-section:hover {
  border-color: var(--accent2);
  transform: translateY(-2px);
}

.hero-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.hero-skins {
  margin-left: 24px;
}

.selected-heroes {
  margin: 16px 0;
  padding: 16px;
  background: rgba(240, 255, 244, 0.8);
  border: 2px solid rgba(198, 246, 213, 0.6);
  border-radius: 12px;
  backdrop-filter: blur(10px);
  animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] .selected-heroes {
  background: rgba(45, 55, 72, 0.8);
  border-color: #4a5568;
}

/* Import section */
.import-section {
  margin: 16px 0;
  padding: 16px;
  background: rgba(255, 248, 225, 0.8);
  border: 2px solid rgba(255, 193, 7, 0.3);
  border-radius: 15px;
  backdrop-filter: blur(10px);
}

.import-preview {
  max-height: 300px;
  overflow-y: auto;
  margin: 12px 0;
  padding: 12px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 8px;
  border: 1px solid #dee2e6;
}

.preview-item {
  padding: 8px 12px;
  margin: 4px 0;
  background: #f8f9fa;
  border-radius: 6px;
  border-left: 4px solid var(--accent);
}

.preview-item.error {
  border-left-color: var(--error);
  background: #ffe6e6;
}

/* Cute floating elements */
.floating {
  position: absolute;
  pointer-events: none;
  z-index: -1;
}

.floating.heart {
  color: #ff6b9d;
  animation: float 6s ease-in-out infinite;
}

.floating.star {
  color: #ffd700;
  animation: float 8s ease-in-out infinite reverse;
}

/* Image upload button */
.upload-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: linear-gradient(135deg, #94d82d, #82c91e);
  color: white;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
  margin-left: 8px;
}

.upload-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(148, 216, 45, 0.4);
}

.upload-btn input {
  display: none;
}

/* Pulse animation */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Swipe indicator for mobile */
.swipe-indicator {
  display: none;
  text-align: center;
  padding: 10px;
  color: var(--muted);
  font-size: 14px;
  animation: bounce 2s infinite;
}

/* Responsive */
@media (max-width: 800px) {
  .controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  table, th, td {
    font-size: 14px;
  }
  
  .stats-grid {
    grid-template-columns: 1fr 1fr;
  }
  
  .filter-group {
    flex-direction: column;
    align-items: stretch;
  }
  
  .card {
    padding: 20px;
    margin-bottom: 20px;
  }
  
  /* Show swipe indicator on mobile */
  .swipe-indicator {
    display: block;
  }
  
  /* Adjust table for mobile */
  .table-container {
    position: relative;
  }
  
  .table-container::after {
    content: 'üëâ';
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 24px;
    opacity: 0.7;
    animation: bounce 2s infinite;
  }
}

@media (max-width: 600px) {
  .card {
    padding: 16px;
    margin: 12px;
  }
  
  button {
    padding: 10px 16px;
    font-size: 14px;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .quick-actions {
    justify-content: center;
  }
  
  /* Hide swipe indicator arrow on very small screens */
  .table-container::after {
    display: none;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(230, 247, 255, 0.5);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, var(--accent2), var(--accent));
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
}

/* Loading dots animation */
@keyframes dotFlashing {
  0% { opacity: 0; }
  50% { opacity: 1; }
  100% { opacity: 0; }
}

.dot-flashing {
  position: relative;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: var(--accent);
  color: var(--accent);
  animation: dotFlashing 1s infinite linear;
}

.dot-flashing::before, .dot-flashing::after {
  content: '';
  display: inline-block;
  position: absolute;
  top: 0;
}

.dot-flashing::before {
  left: -15px;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: var(--accent);
  color: var(--accent);
  animation: dotFlashing 1s infinite linear;
  animation-delay: 0s;
}

.dot-flashing::after {
  left: 15px;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: var(--accent);
  color: var(--accent);
  animation: dotFlashing 1s infinite linear;
  animation-delay: 1s;
}
</style>
</head>
<body>
<!-- Floating decorative elements -->
<div class="floating heart" style="top: 10%; left: 5%; font-size: 24px;">üíñ</div>
<div class="floating star" style="top: 20%; right: 8%; font-size: 20px;">‚≠ê</div>
<div class="floating heart" style="bottom: 15%; left: 7%; font-size: 18px;">üíù</div>
<div class="floating star" style="bottom: 25%; right: 5%; font-size: 22px;">üåü</div>

<div class="wrap">
  <!-- TOAST NOTIFICATION -->
  <div id="toastContainer"></div>

  <!-- LOGIN -->
  <div class="card" id="loginCard">
    <div style="display:flex;align-items:center;gap:10px;justify-content:space-between">
      <div style="display:flex;align-items:center;gap:10px">
        <img class="logo" src="https://raw.githubusercontent.com/HoshinoKotaSouma/shopaccbeorin/main/download%20(3).jpeg" alt="logo">
        <div>
          <div style="font-weight:700;color:var(--accent);font-size:20px">C·ªông T√°c Vi√™n H·ªù G·ªù</div>
          <div class="muted" style="display:flex;align-items:center;gap:5px">
            <i class="fas fa-crown" style="color:gold"></i>
            H·ªá th·ªëng qu·∫£n l√Ω t√†i kho·∫£n
          </div>
        </div>
      </div>
      <button class="theme-switch" id="themeSwitch">üåô</button>
    </div>
    
    <h2 style="margin-top:16px;display:flex;align-items:center;gap:10px">
      <i class="fas fa-sign-in-alt"></i>
      ƒêƒÉng nh·∫≠p
    </h2>
    
    <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
      <input id="login_username" placeholder="üë§ Username" style="flex:1;min-width:200px">
      <input id="login_password" placeholder="üîí Password" type="password" style="flex:1;min-width:200px">
      <button id="btnLogin" style="min-width:120px">
        <i class="fas fa-rocket"></i> ƒêƒÉng nh·∫≠p
      </button>
    </div>
    <p id="loginMsg" style="color:red;margin-top:12px;display:flex;align-items:center;gap:8px"></p>
  </div>

  <!-- APP -->
  <div class="card" id="appCard" style="display:none">
    <div style="display:flex;align-items:center;flex-wrap:wrap;gap:16px">
      <h2 style="display:flex;align-items:center;gap:12px">
        <i class="fas fa-tasks"></i>
        üìã Qu·∫£n l√Ω t√†i kho·∫£n
      </h2>
      <div class="controls" style="margin-left:auto">
        <div id="roleLabel" class="muted cute-badge"></div>
        <input id="filter" placeholder="üîç L·ªçc nhanh..." style="min-width:220px">
        <button id="btnFind" class="ghost"><i class="fas fa-search"></i> T√¨m Acc</button>
        <button id="btnStats" class="ghost"><i class="fas fa-chart-bar"></i> Th·ªëng k√™</button>
        <button id="btnManageSkins" class="ghost"><i class="fas fa-palette"></i> Skin</button>
        <button id="btnImport" class="ghost"><i class="fas fa-file-import"></i> Import</button>
        <button id="btnExport" class="ghost"><i class="fas fa-file-export"></i> Xu·∫•t CSV</button>
        <button id="btnTheme" class="theme-switch">üåô</button>
        <button id="btnLogout" class="ghost"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>

    <!-- STATS DASHBOARD -->
    <div id="statsDashboard" style="display:none">
      <h3 style="display:flex;align-items:center;gap:10px">
        <i class="fas fa-chart-pie"></i>
        üìä Dashboard Th·ªëng k√™
      </h3>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" id="statTotal">0</div>
          <div class="stat-label"><i class="fas fa-users"></i> T·ªïng s·ªë acc</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="statAvailable">0</div>
          <div class="stat-label"><i class="fas fa-check-circle"></i> Acc c√≥ s·∫µn</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="statSold">0</div>
          <div class="stat-label"><i class="fas fa-shopping-cart"></i> ƒê√£ b√°n</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="statRare">0</div>
          <div class="stat-label"><i class="fas fa-gem"></i> Acc hi·∫øm</div>
        </div>
      </div>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="quick-actions">
      <button id="btnMarkHot" class="ghost" style="background:linear-gradient(135deg, #ff6b6b, #ff8e8e)">
        <i class="fas fa-fire"></i> üî• ƒê√°nh d·∫•u HOT
      </button>
      <button id="btnMarkNew" class="ghost" style="background:linear-gradient(135deg, #51cf66, #69db7c)">
        <i class="fas fa-certificate"></i> üÜï ƒê√°nh d·∫•u NEW
      </button>
      <button id="btnAdvancedFilter" class="ghost">
        <i class="fas fa-sliders-h"></i> üéöÔ∏è L·ªçc n√¢ng cao
      </button>
    </div>

    <!-- ADVANCED FILTERS -->
    <div id="advancedFilters" class="advanced-filters" style="display:none">
      <h4 style="display:flex;align-items:center;gap:8px">
        <i class="fas fa-filter"></i>
        üéöÔ∏è L·ªçc n√¢ng cao
      </h4>
      <div class="filter-group">
        <div style="display:flex;align-items:center;gap:8px">
          <i class="fas fa-tag"></i>
          <label>Kho·∫£ng gi√°:</label>
          <input type="number" id="filterMinPrice" placeholder="T·ª´" style="width:100px">
          <input type="number" id="filterMaxPrice" placeholder="ƒê·∫øn" style="width:100px">
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <i class="fas fa-tshirt"></i>
          <label>S·ªë skin t·ªëi thi·ªÉu:</label>
          <input type="number" id="filterMinSkins" placeholder="0" style="width:80px">
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <i class="fas fa-power-off"></i>
          <label>Tr·∫°ng th√°i:</label>
          <select id="filterStatus">
            <option value="">T·∫•t c·∫£</option>
            <option value="ON">C√≥ s·∫µn</option>
            <option value="OFF">ƒê√£ b√°n</option>
          </select>
        </div>
        <button id="btnApplyFilter" class="ghost"><i class="fas fa-check"></i> √Åp d·ª•ng</button>
        <button id="btnResetFilter" class="ghost"><i class="fas fa-undo"></i> Reset</button>
      </div>
    </div>

    <!-- ADMIN FORM -->
    <div id="adminPanel" style="display:none;margin-top:16px">
      <h3 style="display:flex;align-items:center;gap:10px">
        <i class="fas fa-plus-circle"></i>
        ‚ûï Th√™m t√†i kho·∫£n
      </h3>
      
      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
        <input id="new_user" placeholder="üë§ Username" style="flex:1;min-width:200px">
        <input id="new_pass" placeholder="üîí Password" style="flex:1;min-width:200px">
        <input id="new_price" placeholder="üí∞ Gi√°" type="number" style="width:120px">
        <select id="new_status" style="width:120px">
          <option value="ON">C√≥ s·∫µn</option>
          <option value="OFF">ƒê√£ b√°n</option>
        </select>
        <button id="btnAdd" style="min-width:120px">
          <i class="fas fa-plus"></i> Th√™m
        </button>
      </div>
      
      <div style="margin-top:16px">
        <div style="display:flex;align-items:center;gap:8px">
          <i class="fas fa-image"></i>
          <label>H√¨nh ·∫£nh:</label>
          <label class="upload-btn">
            <i class="fas fa-upload"></i> T·∫£i ·∫£nh l√™n
            <input type="file" id="imageUpload" accept="image/*">
          </label>
          <button id="btnDownloadImage" class="ghost" style="background:linear-gradient(135deg, #94d82d, #82c91e)">
            <i class="fas fa-download"></i> T·∫£i ·∫£nh
          </button>
        </div>
        <div id="imagePreview" style="margin-top:12px"></div>
      </div>
      
      <div style="margin-top:16px">
        <div style="display:flex;align-items:center;gap:8px">
          <i class="fas fa-gamepad"></i>
          <label>Hero v√† Skin:</label>
          <button id="btnSelectHeroes" class="ghost"><i class="fas fa-plus"></i> Ch·ªçn Hero</button>
        </div>
        <div id="selectedHeroes" class="selected-heroes" style="margin-top:12px"></div>
      </div>
    </div>

    <!-- ACCOUNT TABLE -->
    <h3 style="margin-top:24px;display:flex;align-items:center;gap:10px">
      <i class="fas fa-list"></i>
      üìã Danh s√°ch t√†i kho·∫£n
    </h3>
    
    <!-- Swipe indicator for mobile -->
    <div class="swipe-indicator">
      <i class="fas fa-arrows-alt-h"></i> Vu·ªët sang ƒë·ªÉ xem th√™m th√¥ng tin
    </div>
    
    <div class="table-container">
      <table id="accountTable">
        <thead>
          <tr>
            <th>STT</th>
            <th>Username</th>
            <th>Password</th>
            <th>Gi√°</th>
            <th>Tr·∫°ng th√°i</th>
            <th>H√¨nh ·∫£nh</th>
            <th>Hero & Skin</th>
            <th>Thao t√°c</th>
          </tr>
        </thead>
        <tbody id="accountList">
          <!-- Accounts will be loaded here -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- LOADING OVERLAY -->
<div id="loadingOverlay">
  <div style="text-align:center;padding:30px">
    <img class="logo" src="https://raw.githubusercontent.com/HoshinoKotaSouma/shopaccbeorin/main/download%20(3).jpeg" alt="logo">
    <h2 style="margin-top:20px;color:var(--accent)">ƒêang t·∫£i d·ªØ li·ªáu...</h2>
    <div style="margin-top:20px">
      <div class="dot-flashing"></div>
    </div>
  </div>
</div>

<!-- POPUP -->
<div id="popup">
  <div id="popupContent"></div>
</div>

<script>
// Mock data for demonstration
let accounts = [
  {
    id: 1,
    user: "acc_pro_01",
    pass: "pass123",
    price: 500000,
    status: "ON",
    image: "https://via.placeholder.com/150",
    heroes: ["Zuka", "Liliana"],
    skins: ["Zuka - Blazing Fist", "Liliana - Fox Bride"],
    hot: false,
    new: true
  },
  {
    id: 2,
    user: "vip_account",
    pass: "vip456",
    price: 1200000,
    status: "ON",
    image: "https://via.placeholder.com/150",
    heroes: ["Krixi", "Yorn", "Valhein"],
    skins: ["Krixi - Sugar Fairy", "Yorn - Dragon Hunter", "Valhein - Street Punk"],
    hot: true,
    new: false
  },
  {
    id: 3,
    user: "sold_acc",
    pass: "sold789",
    price: 800000,
    status: "OFF",
    image: "https://via.placeholder.com/150",
    heroes: ["Raz", "Tulen"],
    skins: ["Raz - Street Magician", "Tulen - Thunder God"],
    hot: false,
    new: false
  }
];

let currentUser = null;
let isAdmin = false;
let selectedHeroes = [];
let selectedSkins = [];

// DOM Elements
const loginCard = document.getElementById('loginCard');
const appCard = document.getElementById('appCard');
const loginMsg = document.getElementById('loginMsg');
const accountList = document.getElementById('accountList');
const roleLabel = document.getElementById('roleLabel');
const adminPanel = document.getElementById('adminPanel');
const statsDashboard = document.getElementById('statsDashboard');
const advancedFilters = document.getElementById('advancedFilters');
const selectedHeroesDiv = document.getElementById('selectedHeroes');
const imagePreview = document.getElementById('imagePreview');
const loadingOverlay = document.getElementById('loadingOverlay');
const popup = document.getElementById('popup');
const popupContent = document.getElementById('popupContent');
const toastContainer = document.getElementById('toastContainer');

// Theme management
function initTheme() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.body.setAttribute('data-theme', savedTheme);
  updateThemeButton(savedTheme);
}

function toggleTheme() {
  const currentTheme = document.body.getAttribute('data-theme');
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  document.body.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  updateThemeButton(newTheme);
}

function updateThemeButton(theme) {
  const buttons = document.querySelectorAll('.theme-switch');
  buttons.forEach(btn => {
    btn.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
  });
}

// Toast notification
function showToast(message, type = 'info', duration = 3000) {
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `
    <div style="display:flex;align-items:center;gap:10px">
      <i class="fas fa-${getToastIcon(type)}"></i>
      <span>${message}</span>
    </div>
  `;
  
  toastContainer.appendChild(toast);
  
  setTimeout(() => {
    toast.classList.add('show');
  }, 10);
  
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => {
      if (toast.parentNode) {
        toast.parentNode.removeChild(toast);
      }
    }, 400);
  }, duration);
}

function getToastIcon(type) {
  switch(type) {
    case 'success': return 'check-circle';
    case 'error': return 'exclamation-circle';
    case 'warning': return 'exclamation-triangle';
    default: return 'info-circle';
  }
}

// Login function
function login() {
  const username = document.getElementById('login_username').value;
  const password = document.getElementById('login_password').value;
  
  if (!username || !password) {
    loginMsg.innerHTML = '<i class="fas fa-exclamation-circle"></i> Vui l√≤ng nh·∫≠p username v√† password';
    return;
  }
  
  // Mock authentication
  if (username === 'admin' && password === 'admin') {
    currentUser = { username, role: 'admin' };
    isAdmin = true;
    showApp();
    showToast('ƒêƒÉng nh·∫≠p th√†nh c√¥ng v·ªõi quy·ªÅn Admin!', 'success');
  } else if (username === 'ctv' && password === 'ctv') {
    currentUser = { username, role: 'ctv' };
    isAdmin = false;
    showApp();
    showToast('ƒêƒÉng nh·∫≠p th√†nh c√¥ng v·ªõi quy·ªÅn CTV!', 'success');
  } else {
    loginMsg.innerHTML = '<i class="fas fa-times-circle"></i> Sai username ho·∫∑c password';
    return;
  }
}

function showApp() {
  loginCard.style.display = 'none';
  appCard.style.display = 'block';
  
  if (isAdmin) {
    roleLabel.innerHTML = '<i class="fas fa-crown"></i> ADMIN';
    adminPanel.style.display = 'block';
  } else {
    roleLabel.innerHTML = '<i class="fas fa-user"></i> CTV';
    adminPanel.style.display = 'none';
  }
  
  loadAccounts();
}

function logout() {
  currentUser = null;
  isAdmin = false;
  appCard.style.display = 'none';
  loginCard.style.display = 'block';
  document.getElementById('login_username').value = '';
  document.getElementById('login_password').value = '';
  loginMsg.textContent = '';
}

// Account management
function loadAccounts() {
  showLoading();
  
  // Simulate API call
  setTimeout(() => {
    renderAccounts(accounts);
    updateStats();
    hideLoading();
  }, 1000);
}

function renderAccounts(accountsToRender) {
  accountList.innerHTML = '';
  
  if (accountsToRender.length === 0) {
    accountList.innerHTML = `
      <tr>
        <td colspan="8" style="text-align:center;padding:30px">
          <i class="fas fa-inbox" style="font-size:48px;color:var(--muted);margin-bottom:16px"></i>
          <div style="color:var(--muted)">Kh√¥ng c√≥ t√†i kho·∫£n n√†o</div>
        </td>
      </tr>
    `;
    return;
  }
  
  accountsToRender.forEach((acc, index) => {
    const tr = document.createElement('tr');
    if (acc.hot) tr.classList.add('tr-hot');
    if (acc.new) tr.classList.add('tr-new');
    if (acc.status === 'OFF') tr.classList.add('tr-sold');
    
    tr.innerHTML = `
      <td>${index + 1}</td>
      <td>${acc.user}</td>
      <td>${acc.pass}</td>
      <td>${formatPrice(acc.price)}</td>
      <td>
        <span class="cute-badge" style="background:${acc.status === 'ON' ? 'linear-gradient(45deg, #51cf66, #69db7c)' : 'linear-gradient(45deg, #868e96, #adb5bd)'}">
          ${acc.status === 'ON' ? 'C√≥ s·∫µn' : 'ƒê√£ b√°n'}
        </span>
        ${acc.hot ? '<span class="cute-badge" style="background:linear-gradient(45deg, #ff6b6b, #ff8e8e);margin-left:5px">üî• HOT</span>' : ''}
        ${acc.new ? '<span class="cute-badge" style="background:linear-gradient(45deg, #339af0, #4dabf7);margin-left:5px">üÜï NEW</span>' : ''}
      </td>
      <td>
        <img class="thumb" src="${acc.image}" alt="Account image" onclick="showImage('${acc.image}')">
        <button class="upload-btn" onclick="downloadImage('${acc.image}', '${acc.user}')">
          <i class="fas fa-download"></i> T·∫£i ·∫£nh
        </button>
      </td>
      <td>
        <div style="max-width:200px">
          ${acc.heroes ? acc.heroes.map(hero => `
            <div class="cute-badge" style="background:linear-gradient(45deg, #9d4edd, #c77dff);margin:2px">${hero}</div>
          `).join('') : ''}
          ${acc.skins ? acc.skins.map(skin => `
            <div class="cute-badge" style="background:linear-gradient(45deg, #f783ac, #ffdeeb);margin:2px;font-size:10px">${skin}</div>
          `).join('') : ''}
        </div>
      </td>
      <td>
        <div style="display:flex;gap:5px;flex-wrap:wrap">
          <button class="ghost" style="padding:6px 10px;font-size:12px" onclick="editAccount(${acc.id})">
            <i class="fas fa-edit"></i>
          </button>
          ${isAdmin ? `
            <button class="ghost" style="padding:6px 10px;font-size:12px;background:linear-gradient(45deg, #ff6b6b, #ff8e8e)" onclick="deleteAccount(${acc.id})">
              <i class="fas fa-trash"></i>
            </button>
          ` : ''}
          <button class="ghost" style="padding:6px 10px;font-size:12px;background:linear-gradient(45deg, #51cf66, #69db7c)" onclick="toggleStatus(${acc.id})">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
      </td>
    `;
    
    accountList.appendChild(tr);
  });
}

function addAccount() {
  const user = document.getElementById('new_user').value;
  const pass = document.getElementById('new_pass').value;
  const price = document.getElementById('new_price').value;
  const status = document.getElementById('new_status').value;
  
  if (!user || !pass || !price) {
    showToast('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin', 'error');
    return;
  }
  
  const newAccount = {
    id: accounts.length > 0 ? Math.max(...accounts.map(a => a.id)) + 1 : 1,
    user,
    pass,
    price: parseInt(price),
    status,
    image: document.getElementById('imagePreview').querySelector('img')?.src || 'https://via.placeholder.com/150',
    heroes: selectedHeroes,
    skins: selectedSkins,
    hot: false,
    new: true
  };
  
  accounts.push(newAccount);
  
  // Reset form
  document.getElementById('new_user').value = '';
  document.getElementById('new_pass').value = '';
  document.getElementById('new_price').value = '';
  document.getElementById('new_status').value = 'ON';
  imagePreview.innerHTML = '';
  selectedHeroes = [];
  selectedSkins = [];
  selectedHeroesDiv.innerHTML = '';
  
  loadAccounts();
  showToast('ƒê√£ th√™m t√†i kho·∫£n m·ªõi th√†nh c√¥ng!', 'success');
}

function deleteAccount(id) {
  if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t√†i kho·∫£n n√†y?')) return;
  
  accounts = accounts.filter(acc => acc.id !== id);
  loadAccounts();
  showToast('ƒê√£ x√≥a t√†i kho·∫£n!', 'success');
}

function editAccount(id) {
  const account = accounts.find(acc => acc.id === id);
  if (!account) return;
  
  // In a real app, you would show an edit form
  showToast(`Ch·ªânh s·ª≠a t√†i kho·∫£n ${account.user}`, 'info');
}

function toggleStatus(id) {
  const account = accounts.find(acc => acc.id === id);
  if (!account) return;
  
  account.status = account.status === 'ON' ? 'OFF' : 'ON';
  loadAccounts();
  showToast(`ƒê√£ chuy·ªÉn tr·∫°ng th√°i t√†i kho·∫£n ${account.user}`, 'success');
}

function markHot() {
  const selected = getSelectedAccounts();
  if (selected.length === 0) {
    showToast('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt t√†i kho·∫£n', 'warning');
    return;
  }
  
  selected.forEach(id => {
    const account = accounts.find(acc => acc.id === id);
    if (account) account.hot = true;
  });
  
  loadAccounts();
  showToast(`ƒê√£ ƒë√°nh d·∫•u ${selected.length} t√†i kho·∫£n l√† HOT!`, 'success');
}

function markNew() {
  const selected = getSelectedAccounts();
  if (selected.length === 0) {
    showToast('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt t√†i kho·∫£n', 'warning');
    return;
  }
  
  selected.forEach(id => {
    const account = accounts.find(acc => acc.id === id);
    if (account) account.new = true;
  });
  
  loadAccounts();
  showToast(`ƒê√£ ƒë√°nh d·∫•u ${selected.length} t√†i kho·∫£n l√† NEW!`, 'success');
}

function getSelectedAccounts() {
  // In a real app, you would get selected accounts from checkboxes
  // For demo, we'll just return the first account ID
  return accounts.length > 0 ? [accounts[0].id] : [];
}

// Stats
function updateStats() {
  const total = accounts.length;
  const available = accounts.filter(acc => acc.status === 'ON').length;
  const sold = accounts.filter(acc => acc.status === 'OFF').length;
  const rare = accounts.filter(acc => acc.heroes && acc.heroes.length >= 3).length;
  
  document.getElementById('statTotal').textContent = total;
  document.getElementById('statAvailable').textContent = available;
  document.getElementById('statSold').textContent = sold;
  document.getElementById('statRare').textContent = rare;
}

function toggleStats() {
  const dashboard = document.getElementById('statsDashboard');
  dashboard.style.display = dashboard.style.display === 'none' ? 'block' : 'none';
}

// Image handling
function handleImageUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  
  if (!file.type.match('image.*')) {
    showToast('Vui l√≤ng ch·ªçn file ·∫£nh', 'error');
    return;
  }
  
  const reader = new FileReader();
  reader.onload = function(e) {
    imagePreview.innerHTML = `
      <div style="display:flex;align-items:center;gap:12px">
        <img src="${e.target.result}" style="width:100px;height:100px;object-fit:cover;border-radius:12px;border:2px solid var(--accent2)">
        <div>
          <div style="font-weight:600">·∫¢nh ƒë√£ t·∫£i l√™n</div>
          <div class="muted" style="font-size:12px">${file.name}</div>
        </div>
      </div>
    `;
  };
  reader.readAsDataURL(file);
}

function downloadImage(imageUrl, username) {
  // In a real app, this would download the image
  showToast(`ƒê√£ t·∫£i ·∫£nh c·ªßa t√†i kho·∫£n ${username}`, 'success');
}

function showImage(imageUrl) {
  popupContent.innerHTML = `
    <div style="text-align:center">
      <h3 style="margin-bottom:16px">H√¨nh ·∫£nh t√†i kho·∫£n</h3>
      <img src="${imageUrl}" style="max-width:100%;max-height:70vh;border-radius:12px">
      <div style="margin-top:16px">
        <button class="upload-btn" onclick="downloadImage('${imageUrl}', 'account')">
          <i class="fas fa-download"></i> T·∫£i ·∫£nh
        </button>
        <button class="ghost" onclick="closePopup()" style="margin-left:8px">
          <i class="fas fa-times"></i> ƒê√≥ng
        </button>
      </div>
    </div>
  `;
  popup.style.display = 'flex';
}

// Hero and skin selection
function selectHeroes() {
  // Mock hero and skin data
  const heroes = [
    { name: "Zuka", skins: ["Default", "Blazing Fist", "Cyber Samurai"] },
    { name: "Liliana", skins: ["Default", "Fox Bride", "Moonlight Mage"] },
    { name: "Krixi", skins: ["Default", "Sugar Fairy", "Star Guardian"] },
    { name: "Yorn", skins: ["Default", "Dragon Hunter", "Cyber Sniper"] },
    { name: "Valhein", skins: ["Default", "Street Punk", "Demon Hunter"] }
  ];
  
  popupContent.innerHTML = `
    <div>
      <h3 style="display:flex;align-items:center;gap:10px;margin-bottom:16px">
        <i class="fas fa-gamepad"></i>
        Ch·ªçn Hero v√† Skin
      </h3>
      
      ${heroes.map(hero => `
        <div class="hero-section">
          <div class="hero-header">
            <input type="checkbox" id="hero_${hero.name}" onchange="toggleHero('${hero.name}')">
            <label for="hero_${hero.name}" style="font-weight:600;cursor:pointer">${hero.name}</label>
          </div>
          <div class="hero-skins" id="skins_${hero.name}" style="display:none">
            ${hero.skins.map(skin => `
              <label style="display:inline-block;margin:4px">
                <input type="checkbox" id="skin_${hero.name}_${skin}" onchange="toggleSkin('${hero.name}', '${skin}')">
                <span>${skin}</span>
              </label>
            `).join('')}
          </div>
        </div>
      `).join('')}
      
      <div style="margin-top:20px;text-align:right">
        <button onclick="closePopup()">
          <i class="fas fa-check"></i> Xong
        </button>
      </div>
    </div>
  `;
  popup.style.display = 'flex';
}

function toggleHero(heroName) {
  const checkbox = document.getElementById(`hero_${heroName}`);
  const skinsDiv = document.getElementById(`skins_${heroName}`);
  
  if (checkbox.checked) {
    skinsDiv.style.display = 'block';
    if (!selectedHeroes.includes(heroName)) {
      selectedHeroes.push(heroName);
    }
  } else {
    skinsDiv.style.display = 'none';
    selectedHeroes = selectedHeroes.filter(h => h !== heroName);
    // Remove all skins for this hero
    selectedSkins = selectedSkins.filter(s => !s.startsWith(`${heroName} - `));
    
    // Uncheck all skin checkboxes for this hero
    const skinCheckboxes = document.querySelectorAll(`[id^="skin_${heroName}_"]`);
    skinCheckboxes.forEach(cb => cb.checked = false);
  }
  
  updateSelectedHeroesDisplay();
}

function toggleSkin(heroName, skinName) {
  const fullSkinName = `${heroName} - ${skinName}`;
  const checkbox = document.getElementById(`skin_${heroName}_${skinName}`);
  
  if (checkbox.checked) {
    if (!selectedSkins.includes(fullSkinName)) {
      selectedSkins.push(fullSkinName);
    }
  } else {
    selectedSkins = selectedSkins.filter(s => s !== fullSkinName);
  }
  
  updateSelectedHeroesDisplay();
}

function updateSelectedHeroesDisplay() {
  if (selectedHeroes.length === 0 && selectedSkins.length === 0) {
    selectedHeroesDiv.innerHTML = '<div class="muted">Ch∆∞a ch·ªçn hero n√†o</div>';
    return;
  }
  
  let html = '';
  
  if (selectedHeroes.length > 0) {
    html += `
      <div style="margin-bottom:12px">
        <div style="font-weight:600;margin-bottom:8px">Hero ƒë√£ ch·ªçn:</div>
        <div>
          ${selectedHeroes.map(hero => `
            <span class="cute-badge" style="background:linear-gradient(45deg, #9d4edd, #c77dff);margin:2px">${hero}</span>
          `).join('')}
        </div>
      </div>
    `;
  }
  
  if (selectedSkins.length > 0) {
    html += `
      <div>
        <div style="font-weight:600;margin-bottom:8px">Skin ƒë√£ ch·ªçn:</div>
        <div>
          ${selectedSkins.map(skin => `
            <span class="cute-badge" style="background:linear-gradient(45deg, #f783ac, #ffdeeb);margin:2px;font-size:10px">${skin}</span>
          `).join('')}
        </div>
      </div>
    `;
  }
  
  selectedHeroesDiv.innerHTML = html;
}

// Filtering
function applyFilter() {
  const filterText = document.getElementById('filter').value.toLowerCase();
  const minPrice = document.getElementById('filterMinPrice').value;
  const maxPrice = document.getElementById('filterMaxPrice').value;
  const minSkins = document.getElementById('filterMinSkins').value;
  const status = document.getElementById('filterStatus').value;
  
  let filteredAccounts = accounts;
  
  // Text filter
  if (filterText) {
    filteredAccounts = filteredAccounts.filter(acc => 
      acc.user.toLowerCase().includes(filterText) || 
      (acc.heroes && acc.heroes.some(hero => hero.toLowerCase().includes(filterText))) ||
      (acc.skins && acc.skins.some(skin => skin.toLowerCase().includes(filterText)))
    );
  }
  
  // Price filter
  if (minPrice) {
    filteredAccounts = filteredAccounts.filter(acc => acc.price >= parseInt(minPrice));
  }
  
  if (maxPrice) {
    filteredAccounts = filteredAccounts.filter(acc => acc.price <= parseInt(maxPrice));
  }
  
  // Skin count filter
  if (minSkins) {
    filteredAccounts = filteredAccounts.filter(acc => 
      acc.skins && acc.skins.length >= parseInt(minSkins)
    );
  }
  
  // Status filter
  if (status) {
    filteredAccounts = filteredAccounts.filter(acc => acc.status === status);
  }
  
  renderAccounts(filteredAccounts);
}

function resetFilter() {
  document.getElementById('filter').value = '';
  document.getElementById('filterMinPrice').value = '';
  document.getElementById('filterMaxPrice').value = '';
  document.getElementById('filterMinSkins').value = '';
  document.getElementById('filterStatus').value = '';
  
  loadAccounts();
}

function toggleAdvancedFilter() {
  advancedFilters.style.display = advancedFilters.style.display === 'none' ? 'block' : 'none';
}

// Utility functions
function formatPrice(price) {
  return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(price);
}

function showLoading() {
  loadingOverlay.style.display = 'flex';
}

function hideLoading() {
  loadingOverlay.classList.add('fade-out');
  setTimeout(() => {
    loadingOverlay.style.display = 'none';
    loadingOverlay.classList.remove('fade-out');
  }, 1000);
}

function closePopup() {
  popup.style.display = 'none';
}

// Event listeners
document.getElementById('btnLogin').addEventListener('click', login);
document.getElementById('login_password').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') login();
});

document.getElementById('btnLogout').addEventListener('click', logout);
document.getElementById('btnAdd').addEventListener('click', addAccount);
document.getElementById('btnStats').addEventListener('click', toggleStats);
document.getElementById('btnMarkHot').addEventListener('click', markHot);
document.getElementById('btnMarkNew').addEventListener('click', markNew);
document.getElementById('btnAdvancedFilter').addEventListener('click', toggleAdvancedFilter);
document.getElementById('btnApplyFilter').addEventListener('click', applyFilter);
document.getElementById('btnResetFilter').addEventListener('click', resetFilter);
document.getElementById('btnSelectHeroes').addEventListener('click', selectHeroes);
document.getElementById('imageUpload').addEventListener('change', handleImageUpload);
document.getElementById('filter').addEventListener('input', applyFilter);

// Theme toggles
document.getElementById('themeSwitch').addEventListener('click', toggleTheme);
document.getElementById('btnTheme').addEventListener('click', toggleTheme);

// Initialize
initTheme();
</script>
</body>
</html>